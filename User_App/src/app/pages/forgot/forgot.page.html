<!--
  Authors : initappz (Rahul Jograna)
  Website : https://initappz.com/
  App Name : Food Delivery Ionic 7 And Laravel
  This App Template Source code is licensed as per the
  terms found in the Website https://initappz.com/license
  Copyright and Good Faith Purchasers Â© 2023-present initappz.
-->
<ion-header class="ion-no-border">
  <ion-toolbar mode="ios" color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="onBack()" color="light">
        <ion-icon slot="icon-only" name="chevron-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="login-screen">
    <div class="login-content">
      <img src="assets/images/icon_white.png" alt="" class="icon-img">
      <ion-label class="title">{{util.translate('Reset Password')}}</ion-label>
      <ion-label class="sub-title">{{util.translate('Please enter your regsiter email')}}<br>
        {{util.translate('to verify your account')}}
      </ion-label>
    </div>

    <div class="login-form-content" *ngIf="util.appSettings.reset_pwd == 0">
      <form #loginForm="ngForm" novalidate *ngIf="step == 1">
        <ion-item lines="none">
          <ion-input [(ngModel)]="login.email" type="email" [placeholder]="util.translate('Email')" name="email"
            #email="ngModel" spellcheck="false" autocapitalize="off" required>
          </ion-input>
        </ion-item>
        <ion-text color="light">
          <p [hidden]="email.valid || submitted == false" class="ion-padding-start">
            {{util.translate('Email is required')}}
          </p>
        </ion-text>

        <ion-row class="ion-no-margin ion-no-padding">
          <ion-col class="ion-no-margin ion-no-padding">
            <ion-button class="btn_class" (click)="onLogin(loginForm)" type="submit" expand="block" color="light"
              [disabled]="isLogin">
              <span *ngIf="!isLogin"> {{util.translate('SEND OTP')}}</span>
              <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
            </ion-button>
          </ion-col>
        </ion-row>

      </form>

      <form #loginForm="ngForm" class="animated animatedFadeInUp fadeInUp" *ngIf="step == 2">
        <ion-item lines="none">
          <ion-icon name="lock-closed" slot="start" color="light"></ion-icon>
          <ion-input [placeholder]="util.translate('Password')" type="password" [disabled]="isLogin"
            [(ngModel)]="newPassword.password" name="password" [type]="viewPassword== true?'text':'password'"
            #password="ngModel" required></ion-input>
          <ion-icon slot="end" (click)="changeType()" color="light"
            [name]="viewPassword == true? 'eye-outline':'eye-off-outline'">
          </ion-icon>
        </ion-item>

        <ion-text color="danger">
          <p [hidden]="newPassword.password !='' || submitted == false" class="ion-padding-start">
            {{util.translate("Password is required")}}
          </p>
        </ion-text>

        <ion-item lines="none">
          <ion-icon name="lock-closed" slot="start" color="light"></ion-icon>
          <ion-input [placeholder]="util.translate('Confirm Password')" type="password" [disabled]="isLogin"
            [(ngModel)]="newPassword.confirm" name="confirm" [type]="viewPassword== true?'text':'password'"
            #confirm="ngModel" required></ion-input>
          <ion-icon slot="end" (click)="changeType()" color="light"
            [name]="viewPassword == true? 'eye-outline':'eye-off-outline'">
          </ion-icon>
        </ion-item>

        <ion-text color="danger">
          <p [hidden]="newPassword.confirm !='' || submitted == false" class="ion-padding-start">
            {{util.translate("Confirm Password is required")}}
          </p>
        </ion-text>


        <ion-button (click)="resetPassword(loginForm)" type="submit" color="light" expand="block" [disabled]="isLogin"
          shape="round" class="login_btn">
          <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
          <span *ngIf="!isLogin"> {{util.translate("Update Password")}} </span>
        </ion-button>

      </form>
    </div>

    <div class="login-form-content" *ngIf="util.appSettings.reset_pwd == 1">
      <form #loginForm="ngForm" novalidate *ngIf="step == 1">
        <ion-row>
          <ion-col size="2.5" (click)="openCountry()" class="ion-no-margin ion-no-padding">
            <ion-item lines="none">
              <ion-input style="font-size: 12px;" [(ngModel)]="mobile.country_code" disabled="true" type="text"
                name="ccode" #ccode="ngModel" spellcheck="false" autocapitalize="off" required>
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="1" class="ion-no-margin ion-no-padding"></ion-col>
          <ion-col size="8.5" class="ion-no-margin ion-no-padding">
            <ion-item lines="none">
              <ion-input [(ngModel)]="mobile.mobile" type="number" [placeholder]="util.translate('Mobile Number')"
                name="mobile" #phone="ngModel" spellcheck="false" autocapitalize="off" required>
              </ion-input>
            </ion-item>
            <ion-text color="light">
              <p [hidden]="phone.valid || submitted == false" class="ion-padding-start">
                {{util.translate('Phone number is required')}}
              </p>
            </ion-text>
          </ion-col>
        </ion-row>

        <ion-row class="ion-no-margin ion-no-padding">
          <ion-col class="ion-no-margin ion-no-padding">
            <ion-button class="btn_class" (click)="onOTPLogin(loginForm)" type="submit" expand="block" color="light"
              [disabled]="isLogin">
              <span *ngIf="!isLogin"> {{util.translate('Send OTP')}}</span>
              <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
            </ion-button>
          </ion-col>
        </ion-row>
      </form>
      <form #loginForm="ngForm" class="animated animatedFadeInUp fadeInUp" *ngIf="step == 2">
        <ion-item lines="none">
          <ion-icon name="lock-closed" slot="start" color="light"></ion-icon>
          <ion-input [placeholder]="util.translate('Password')" type="password" [disabled]="isLogin"
            [(ngModel)]="newPassword.password" name="password" [type]="viewPassword== true?'text':'password'"
            #password="ngModel" required></ion-input>
          <ion-icon slot="end" (click)="changeType()" color="light"
            [name]="viewPassword == true? 'eye-outline':'eye-off-outline'">
          </ion-icon>
        </ion-item>

        <ion-text color="danger">
          <p [hidden]="newPassword.password !='' || submitted == false" class="ion-padding-start">
            {{util.translate("Password is required")}}
          </p>
        </ion-text>

        <ion-item lines="none">
          <ion-icon name="lock-closed" slot="start" color="light"></ion-icon>
          <ion-input [placeholder]="util.translate('Confirm Password')" type="password" [disabled]="isLogin"
            [(ngModel)]="newPassword.confirm" name="confirm" [type]="viewPassword== true?'text':'password'"
            #confirm="ngModel" required></ion-input>
          <ion-icon slot="end" (click)="changeType()" color="light"
            [name]="viewPassword == true? 'eye-outline':'eye-off-outline'">
          </ion-icon>
        </ion-item>

        <ion-text color="danger">
          <p [hidden]="newPassword.confirm !='' || submitted == false" class="ion-padding-start">
            {{util.translate("Confirm Password is required")}}
          </p>
        </ion-text>


        <ion-button (click)="resetPasswordPhone(loginForm)" type="submit" color="light" expand="block"
          [disabled]="isLogin" shape="round" class="login_btn" *ngIf="util.appSettings.sms_name != '2'">
          <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
          <span *ngIf="!isLogin"> {{util.translate("Update Password")}} </span>
        </ion-button>

        <ion-button (click)="resetPasswordPhoneFirebase(loginForm)" type="submit" color="light" expand="block"
          [disabled]="isLogin" shape="round" class="login_btn" *ngIf="util.appSettings.sms_name == '2'">
          <ion-spinner name="circles" *ngIf="isLogin"></ion-spinner>
          <span *ngIf="!isLogin"> {{util.translate("Update Password")}} </span>
        </ion-button>
      </form>
    </div>
  </div>
</ion-content>